<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Undangan Pernikahan — Suriansyah &amp; Sonia</title>
  <meta name="description" content="Undangan digital Suriansyah & Sonia — RSVP, peta, galeri, dan ucapan." />

  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;600;700&family=Playfair+Display:wght@400;600;700&family=Inter:wght@300;400;600&display=swap" rel="stylesheet">

  <!-- Lottie Player -->
  <script src="https://unpkg.com/@lottiefiles/lottie-player@latest/dist/lottie-player.js" defer></script>

  <style>
    :root{--bg:#f8f6f2;--card:#fff;--muted:#777;--accent:#b08b6b;--accent-2:#cfa26f}
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;font-family:Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial; background:var(--bg);color:#222}
    .container{max-width:980px;margin:0 auto;padding:20px}

    /* Landing */
    .landing{min-height:90vh;display:grid;grid-template-columns:1fr;align-items:center;justify-items:center;text-align:center;padding:32px}
    .landing .card{background:linear-gradient(180deg,rgba(255,255,255,0.9),rgba(255,255,255,0.75));border-radius:18px;padding:28px;width:100%;max-width:820px;box-shadow:0 8px 30px rgba(0,0,0,0.08)}
    h1{font-family:'Playfair Display', serif;margin:6px 0;font-size:34px}
    .couple{font-family:'Dancing Script', cursive;font-size:36px;color:var(--accent)}
    p.lead{color:var(--muted);margin:8px 0 18px}
    .btn{display:inline-block;padding:12px 18px;border-radius:12px;border:0;font-weight:600;cursor:pointer}
    .btn-primary{background:var(--accent);color:#fff}
    .btn-ghost{background:transparent;border:1px solid rgba(0,0,0,0.06);color:#333}

    /* Main content */
    main{display:none;padding-bottom:60px}
    .section{background:var(--card);border-radius:12px;padding:18px;margin:18px 0;box-shadow:0 6px 20px rgba(0,0,0,0.04)}
    .grid{display:grid;grid-template-columns:1fr 1fr;gap:18px;align-items:start}
    .center{grid-column:1/-1;text-align:center}

    .countdown{display:flex;gap:12px;justify-content:center}
    .countdown .item{text-align:center;padding:10px 14px;border-radius:10px;background:#faf8f6;min-width:72px}
    .countdown .num{font-size:20px;font-weight:700}

    .photo-frame{width:140px;height:140px;border-radius:8px;overflow:hidden;border:6px solid #fff;box-shadow:0 6px 18px rgba(0,0,0,0.06)}
    .couple-photos{display:flex;gap:18px;align-items:center;justify-content:center}

    .bank-item{display:flex;justify-content:space-between;align-items:center;background:#fefaf6;padding:10px;border-radius:8px}
    .copy-btn{background:transparent;border:1px solid rgba(0,0,0,0.06);padding:8px 10px;border-radius:8px;cursor:pointer}

    .messages{max-height:220px;overflow:auto;padding:6px;background:#fff;border-radius:8px}
    .message{padding:8px;border-radius:8px;border:1px solid rgba(0,0,0,0.04);margin-bottom:8px}

    .video-container iframe{width:100%;height:360px;border-radius:8px}

    footer{padding:20px;text-align:center;color:var(--muted)}

    /* Responsive */
    @media (max-width:760px){.grid{grid-template-columns:1fr}.photo-frame{width:110px;height:110px}.video-container iframe{height:220px}}
  </style>
</head>
<body>
  <div class="container">
    <!-- LANDING -->
    <section class="landing" id="landing">
      <div class="card">
        <div style="max-height:260px;overflow:hidden;border-radius:12px;margin-bottom:18px">
          <lottie-player src="https://assets2.lottiefiles.com/packages/lf20_GbabwrUY2k.json" background="transparent" speed="1" loop autoplay style="width:100%;height:260px;object-fit:cover"></lottie-player>
        </div>
        <h1>Undangan Pernikahan</h1>
        <div class="couple">Suriansyah &amp; Sonia</div>
        <p class="lead">24 September 2025 — Masjid Jabal Rahmah Mandin</p>
        <div style="margin-top:16px">
          <button class="btn btn-primary" id="openBtn">Buka Undangan</button>
          <button class="btn btn-ghost" id="previewBtn">Lihat Sekilas</button>
        </div>
      </div>
    </section>

    <!-- MAIN -->
    <main id="main">

      <section class="section center" aria-label="Countdown">
        <h2>Menuju Hari Bahagia</h2>
        <div class="countdown" id="countdown">
          <div class="item"><div class="num" id="d">00</div><div class="label">Hari</div></div>
          <div class="item"><div class="num" id="h">00</div><div class="label">Jam</div></div>
          <div class="item"><div class="num" id="m">00</div><div class="label">Menit</div></div>
          <div class="item"><div class="num" id="s">00</div><div class="label">Detik</div></div>
        </div>
        <div style="margin-top:12px">
          <button class="btn btn-primary" id="saveDate">Save The Date</button>
          <button class="btn btn-ghost" id="shareBtnMain">Bagikan</button>
        </div>
      </section>

      <section class="section" aria-label="Bismillah">
        <div style="display:flex;gap:16px;align-items:center;flex-wrap:wrap">
          <div style="flex:1;min-width:220px">
            <h3 style="margin:6px 0;font-family:'Amiri', serif">بِسْمِ ٱللَّهِ ٱلرَّحْمَٰنِ ٱلرَّحِيمِ</h3>
            <p class="lead">Dengan menyebut nama Allah Yang Maha Pengasih lagi Maha Penyayang</p>
            <blockquote style="color:var(--muted);font-style:italic">"Dan di antara tanda-tanda (kebesaran)-Nya ialah Dia menciptakan pasangan-pasangan ..." <cite>QS. Ar-Rum: 21</cite></blockquote>
          </div>
          <div style="width:260px">
            <lottie-player src="https://assets2.lottiefiles.com/packages/lf20_i9mxcD.json" background="transparent" speed="1" loop autoplay style="width:100%;height:180px"></lottie-player>
          </div>
        </div>
      </section>

      <section class="section" aria-label="Pasangan">
        <div class="grid">
          <div style="text-align:center">
            <div class="photo-frame"><img src="https://raw.githubusercontent.com/ss2811/weddinginvitation/refs/heads/main/groom.jpeg" alt="Suriansyah" style="width:100%;height:100%;object-fit:cover"></div>
            <h4 style="margin:8px 0">Suriansyah, S.Kep., Ners</h4>
          </div>
          <div style="text-align:center">
            <div class="photo-frame"><img src="https://raw.githubusercontent.com/ss2811/weddinginvitation/refs/heads/main/bride.jpeg" alt="Sonia" style="width:100%;height:100%;object-fit:cover"></div>
            <h4 style="margin:8px 0">Sonia Agustina Oemar, S.Farm</h4>
          </div>
        </div>
      </section>

      <section class="section" aria-label="Detail acara">
        <h3>Detail Acara</h3>
        <div class="grid">
          <div>
            <h4>Akad Nikah</h4>
            <p><strong>Waktu:</strong> 07:00 - 08:00 WITA</p>
            <p><strong>Tempat:</strong> Masjid Jabal Rahmah Mandin</p>
          </div>
          <div>
            <h4>Resepsi</h4>
            <p><strong>Waktu:</strong> 08:00 WITA - Selesai</p>
            <p><strong>Tempat:</strong> Rumah Mempelai Wanita (Samping Masjid Jabal Rahmah Mandin)</p>
            <div style="margin-top:8px">
              <button class="btn btn-primary" id="openMap">📍 Buka Peta Lokasi</button>
            </div>
          </div>
        </div>
      </section>

      <section class="section" aria-label="RSVP & Ucapan">
        <h3>RSVP & Ucapan</h3>
        <div class="grid">
          <div>
            <div style="display:flex;flex-direction:column;gap:8px">
              <input id="name" placeholder="Nama lengkap" style="padding:10px;border-radius:8px;border:1px solid #eee">
              <textarea id="message" rows="5" placeholder="Ucapan & doa" style="padding:10px;border-radius:8px;border:1px solid #eee"></textarea>
              <select id="att" style="padding:10px;border-radius:8px;border:1px solid #eee">
                <option value="">Konfirmasi kehadiran...</option>
                <option value="hadir">Insya Allah, Akan Hadir</option>
                <option value="tidak">Maaf, Tidak Dapat Hadir</option>
              </select>
              <div style="display:flex;gap:8px">
                <button class="btn btn-primary" id="sendRsvp">Kirim Ucapan</button>
                <button class="btn btn-ghost" id="clearAll">Hapus Semua</button>
              </div>
            </div>
          </div>
          <div>
            <h4>Ucapan dari Tamu</h4>
            <div class="messages" id="messages"></div>
          </div>
        </div>
      </section>

      <section class="section" aria-label="Kado">
        <h3>Kado Cashless</h3>
        <div style="display:flex;flex-direction:column;gap:10px">
          <div class="bank-item"><div><strong>Bank Mandiri</strong> — <div style="font-size:13px;color:var(--muted)">a.n. Sonia Agustina Oemar</div></div><div><span id="acc1">1410001081983</span> <button class="copy-btn" data-acc="1410001081983">Salin</button></div></div>
          <div class="bank-item"><div><strong>Bank BPD Kalsel</strong> — <div style="font-size:13px;color:var(--muted)">a.n. Sonia Agustina Oemar</div></div><div><span id="acc2">3202963349</span> <button class="copy-btn" data-acc="3202963349">Salin</button></div></div>
        </div>
      </section>

      <section class="section" aria-label="Gallery">
        <h3>Galeri & Video</h3>
        <div style="display:grid;gap:12px">
          <div class="video-container"><iframe src="https://www.youtube.com/embed/xXRjeURBYAE?enablejsapi=1" title="Wedding Video" allowfullscreen></iframe></div>
        </div>
      </section>

      <section class="section">
        <div style="display:flex;justify-content:space-between;align-items:center;gap:12px;flex-wrap:wrap">
          <div>© Suriansyah &amp; Sonia — 2025</div>
          <div style="display:flex;gap:8px">
            <button class="btn btn-ghost" id="playMusic">Play Music</button>
            <button class="btn btn-ghost" id="pauseMusic">Pause</button>
          </div>
        </div>
      </section>

    </main>

    <footer>
      Dibuat dengan ♥ — Undangan digital siap pakai. Simpan file ini sebagai <code>index.html</code> lalu buka di browser.
    </footer>
  </div>

  <!-- Background audio (sembunyi) -->
  <audio id="bgm" loop preload="auto">
    <source src="https://github.com/ss2811/weddinginvitation/raw/refs/heads/main/backgroundmusic.mp3" type="audio/mpeg">
  </audio>

  <script>
    // ---- Minimal JS for functionality ----
    const landing = document.getElementById('landing');
    const main = document.getElementById('main');
    const openBtn = document.getElementById('openBtn');
    const previewBtn = document.getElementById('previewBtn');
    const bgm = document.getElementById('bgm');
    const playMusic = document.getElementById('playMusic');
    const pauseMusic = document.getElementById('pauseMusic');

    openBtn.addEventListener('click', () => {
      landing.style.display = 'none';
      main.style.display = 'block';
      try{bgm.play()}catch(e){}
      window.scrollTo({top:0,behavior:'smooth'});
    });
    previewBtn.addEventListener('click', ()=>{window.scrollTo({top:document.body.scrollHeight*0.1,behavior:'smooth'})});
    playMusic.addEventListener('click', ()=>bgm.play());
    pauseMusic.addEventListener('click', ()=>bgm.pause());

    // Countdown
    const target = new Date('2025-09-24T07:00:00'); // Akad 24 Sep 2025 07:00 WITA
    function updateCountdown(){
      const now = new Date();
      let diff = Math.max(0, target - now);
      const days = Math.floor(diff / (1000*60*60*24)); diff -= days*(1000*60*60*24);
      const hours = Math.floor(diff / (1000*60*60)); diff -= hours*(1000*60*60);
      const mins = Math.floor(diff / (1000*60)); diff -= mins*(1000*60);
      const secs = Math.floor(diff/1000);
      document.getElementById('d').textContent = String(days).padStart(2,'0');
      document.getElementById('h').textContent = String(hours).padStart(2,'0');
      document.getElementById('m').textContent = String(mins).padStart(2,'0');
      document.getElementById('s').textContent = String(secs).padStart(2,'0');
    }
    setInterval(updateCountdown,1000); updateCountdown();

    // Maps: open Google Maps search for venue
    document.getElementById('openMap').addEventListener('click', ()=>{
      const q = encodeURIComponent('Masjid Jabal Rahmah Mandin');
      window.open(`https://www.google.com/maps/search/?api=1&query=${q}`, '_blank');
    });

    // Save The Date -> ICS generator
    document.getElementById('saveDate').addEventListener('click', ()=>{
      const dtStart = '20250924T000000'; // all-day / or set proper time
      const dtEnd = '20250924T050000';
      const ics = [
        'BEGIN:VCALENDAR',
        'VERSION:2.0',
        'PRODID:-//Suriansyah&Sonia//EN',
        'BEGIN:VEVENT',
        `SUMMARY:Akad Nikah — Suriansyah & Sonia`,
        `DTSTART:${dtStart}`,
        `DTEND:${dtEnd}`,
        'LOCATION:Masjid Jabal Rahmah Mandin',
        'DESCRIPTION:Insya Allah kami mengundang Anda untuk hadir dalam acara pernikahan kami.',
        'END:VEVENT',
        'END:VCALENDAR'
      ].join('\r\n');
      const blob = new Blob([ics], {type:'text/calendar'});
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a'); a.href = url; a.download = 'save-the-date.ics'; a.click();
      URL.revokeObjectURL(url);
    });

    // Share
    document.getElementById('shareBtnMain').addEventListener('click', async ()=>{
      const shareData = {title:'Undangan Suriansyah & Sonia', text:'Undangan pernikahan Suriansyah & Sonia — 24 Sep 2025', url:location.href};
      try{
        if(navigator.share) await navigator.share(shareData);
        else { await navigator.clipboard.writeText(location.href); alert('Link undangan disalin ke clipboard.'); }
      }catch(e){ console.warn('Share failed', e); }
    });

    // RSVP: localStorage
    const messagesEl = document.getElementById('messages');
    function loadMessages(){
      messagesEl.innerHTML='';
      const data = JSON.parse(localStorage.getItem('inv_messages')||'[]');
      if(!data.length){ messagesEl.innerHTML = '<div style="color:var(--muted)">Belum ada ucapan dari tamu.</div>'; return; }
      data.slice().reverse().forEach(m=>{
        const el = document.createElement('div'); el.className='message';
        el.innerHTML = `<strong>${escapeHtml(m.name)}</strong> <div style="font-size:12px;color:var(--muted)">${m.attendance||''}</div><div style="margin-top:6px">${escapeHtml(m.message)}</div><div style="margin-top:6px;font-size:12px;color:var(--muted)">${new Date(m.ts).toLocaleString()}</div>`;
        messagesEl.appendChild(el);
      });
    }
    function escapeHtml(s){ return String(s||'').replace(/[&<>"'`]/g, c=>({ '&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;','\'':'&#39;','`':'&#96;' }[c]||c)); }
    document.getElementById('sendRsvp').addEventListener('click', ()=>{
      const name = document.getElementById('name').value.trim();
      const message = document.getElementById('message').value.trim();
      const att = document.getElementById('att').value;
      if(!name || !message){ alert('Mohon isi nama dan ucapan.'); return; }
      const arr = JSON.parse(localStorage.getItem('inv_messages')||'[]');
      arr.push({name, message, attendance:att, ts: Date.now()});
      localStorage.setItem('inv_messages', JSON.stringify(arr));
      document.getElementById('name').value=''; document.getElementById('message').value=''; document.getElementById('att').value='';
      loadMessages();
      alert('Terima kasih! Ucapan Anda telah dikirim.');
    });
    document.getElementById('clearAll').addEventListener('click', ()=>{ if(confirm('Hapus semua ucapan dari localStorage?')){ localStorage.removeItem('inv_messages'); loadMessages(); }});
    loadMessages();

    // Copy account
    Array.from(document.querySelectorAll('.copy-btn')).forEach(b=>{
      b.addEventListener('click', async ()=>{
        const acc = b.dataset.acc;
        try{ await navigator.clipboard.writeText(acc); b.textContent='Tersalin ✓'; setTimeout(()=>b.textContent='Salin',2000);}catch(e){ alert('Gagal menyalin: '+acc); }
      });
    });

    // ---- Lottie fallback checker (simple) ----
    async function checkLottie(timeoutMs=6000){
      const players = Array.from(document.querySelectorAll('lottie-player'));
      for(const p of players){
        const src = p.getAttribute('src'); if(!src) continue;
        try{
          const controller = new AbortController(); const id = setTimeout(()=>controller.abort(), timeoutMs);
          const res = await fetch(src,{signal:controller.signal, cache:'no-store'}); clearTimeout(id);
          if(!res.ok) throw new Error('bad');
          const text = await res.text(); if(!text || text.length<30) throw new Error('empty');
        }catch(e){
          const img = document.createElement('img'); img.src = 'https://via.placeholder.com/800x300?text=Animation+Unavailable'; img.style.width='100%'; img.style.height='auto'; p.replaceWith(img);
          console.warn('Lottie failed:', p.getAttribute('src'));
        }
      }
    }
    document.addEventListener('DOMContentLoaded', ()=>{ setTimeout(checkLottie,800); });

  </script>
</body>
</html>
